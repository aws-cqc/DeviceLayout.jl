# How to Create Composite Components

This guide shows how to build components from other components.

## What is a Composite Component?

A composite component is defined by a schematic graph of subcomponents. The parent component's geometry is generated by planning and building that graph.

## Basic Composite Component

```julia
using DeviceLayout, DeviceLayout.PreferredUnits
using DeviceLayout.SchematicDrivenLayout

@compdef struct MyComposite <: CompositeComponent{typeof(1.0nm)}
    name = "composite"
    sub1_length = 100μm
    sub2_length = 150μm
end

function SchematicDrivenLayout.graph(comp::MyComposite)
    g = SchematicGraph(comp.name)
    
    # Add subcomponents
    n1 = add_node!(g, SubComponent1(length=comp.sub1_length))
    n2 = fuse!(g, n1 => :p1, SubComponent2(length=comp.sub2_length) => :p0)
    
    return g
end
```

## Mapping Hooks

Expose subcomponent hooks on the composite:

```julia
function SchematicDrivenLayout.map_hooks(comp::MyComposite)
    return Dict(
        :input => (1, :p0),   # composite's :input → node 1's :p0
        :output => (2, :p1),  # composite's :output → node 2's :p1
    )
end
```

## Using BasicCompositeComponent

For simple cases, use the built-in:

```julia
# Create a graph
g = SchematicGraph("basic_comp")
add_node!(g, Component1())
fuse!(g, ...)

# Wrap it
comp = BasicCompositeComponent(g, "my_basic_composite")

# Hooks are auto-named as :_1_hookname, :_2_hookname, etc.
```

## See Also

- [Tutorial: Building a Component](../../tutorials/building_a_component.md)
- [Components Reference](@ref)
